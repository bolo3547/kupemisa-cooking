<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
  <style>
    .title { font: bold 22px Helvetica, Arial, sans-serif; fill: #222; }
    .label { font: bold 14px Helvetica, Arial, sans-serif; fill: #111; }
    .pin { font: 12px monospace; fill: #000; }
    .note { font: 12px Helvetica, Arial, sans-serif; fill: #333; }
    .box { fill: #ffffff; stroke: #333; stroke-width: 2px; }
    .wire { stroke-width: 4px; stroke-linecap: round; stroke-linejoin: round; }
    .gnd { stroke: #000; }
    .vcc { stroke: #c0392b; }
    .spi { stroke: #2471a3; }
    .signal { stroke: #27ae60; }
    .control { stroke: #8e44ad; }
    .conflict { fill: #fff3cd; stroke: #f39c12; }
    .swatch { stroke: #666; stroke-width: 1px; }
    .titleblock { font: 12px Helvetica, Arial, sans-serif; fill: #111; }
  </style>

  <rect x="0" y="0" width="1200" height="800" fill="#f6f8fb" />
  <text x="40" y="36" class="title">ESP32 Oil Node — Wiring Schematic (Professional)</text>
  <text x="40" y="56" class="note">File: <tspan font-family="monospace">firmware/esp32_oil_node/wiring_schematic_professional.svg</tspan> • Author: D. Inambao • Date: 2025-12-23</text>

  <!-- Page border -->
  <rect x="12" y="68" width="1176" height="680" fill="none" stroke="#444" stroke-width="2"/>

  <!-- ESP32 block -->
  <rect x="80" y="110" width="240" height="460" class="box" rx="10"/>
  <text x="200" y="140" text-anchor="middle" class="label">ESP32-WROOM-32</text>

  <!-- Left pins list -->
  <text x="60" y="190" class="pin">GPIO 32 ─ ROW0</text>
  <text x="60" y="220" class="pin">GPIO 33 ─ ROW1</text>
  <text x="60" y="250" class="pin">GPIO 25 ─ ROW2</text>
  <text x="60" y="280" class="pin">GPIO 13 ─ ROW3</text>
  <text x="60" y="330" class="pin">GPIO 12 ─ COL0</text>
  <text x="60" y="360" class="pin">GPIO 14 ─ COL1</text>
  <text x="60" y="390" class="pin">GPIO 16 ─ COL2</text>
  <text x="60" y="420" class="pin">GPIO 17 ─ COL3</text>
  <text x="60" y="470" class="pin">3.3V  ─ VCC (TFT)</text>
  <text x="60" y="500" class="pin">GND   ─ GND (all)</text>

  <!-- Right pins list -->
  <text x="350" y="190" class="pin" text-anchor="end">GPIO 23 ─ TFT MOSI</text>
  <text x="350" y="220" class="pin" text-anchor="end">GPIO 18 ─ TFT SCK / Ultrasonic TRIG *</text>
  <text x="350" y="250" class="pin" text-anchor="end">GPIO 19 ─ TFT MISO / Ultrasonic ECHO *</text>
  <text x="350" y="280" class="pin" text-anchor="end">GPIO 5  ─ TFT CS</text>
  <text x="350" y="310" class="pin" text-anchor="end">GPIO 2  ─ TFT DC</text>
  <text x="350" y="340" class="pin" text-anchor="end">GPIO 4  ─ TFT RST</text>
  <text x="350" y="370" class="pin" text-anchor="end">GPIO 15 ─ TFT LED (opt)</text>
  <text x="350" y="400" class="pin" text-anchor="end">GPIO 27 ─ FLOW Signal</text>
  <text x="350" y="430" class="pin" text-anchor="end">GPIO 26 ─ PUMP Relay IN</text>
  <text x="350" y="460" class="pin" text-anchor="end">GPIO 22 ─ Ultrasonic TRIG (alt)</text>
  <text x="350" y="490" class="pin" text-anchor="end">GPIO 21 ─ Ultrasonic ECHO (alt)</text>

  <!-- TFT block -->
  <rect x="460" y="110" width="320" height="220" class="box" rx="8"/>
  <text x="620" y="140" text-anchor="middle" class="label">ILI9488 3.5" TFT (SPI)</text>
  <text x="540" y="180" class="pin">VCC → 3.3V</text>
  <text x="540" y="200" class="pin">GND → GND</text>
  <text x="540" y="220" class="pin">CS  → GPIO 5</text>
  <text x="540" y="240" class="pin">RST → GPIO 4</text>
  <text x="540" y="260" class="pin">DC  → GPIO 2</text>
  <text x="540" y="280" class="pin">MOSI→ GPIO 23</text>
  <text x="540" y="300" class="pin">SCK → GPIO 18</text>
  <text x="540" y="320" class="pin">MISO→ GPIO 19 (opt)</text>
  <text x="540" y="340" class="pin">LED → GPIO 15 or 3.3V</text>

  <!-- Keypad -->
  <rect x="460" y="360" width="240" height="160" class="box" rx="6"/>
  <text x="580" y="390" text-anchor="middle" class="label">4x4 Keypad</text>
  <text x="515" y="420" class="pin">R1 → GPIO 32</text>
  <text x="515" y="440" class="pin">R2 → GPIO 33</text>
  <text x="515" y="460" class="pin">R3 → GPIO 25</text>
  <text x="515" y="480" class="pin">R4 → GPIO 13</text>
  <text x="645" y="420" class="pin">C1 → GPIO 12</text>
  <text x="645" y="440" class="pin">C2 → GPIO 14</text>
  <text x="645" y="460" class="pin">C3 → GPIO 16</text>
  <text x="645" y="480" class="pin">C4 → GPIO 17</text>

  <!-- Flow Sensor -->
  <rect x="820" y="110" width="260" height="120" class="box" rx="6"/>
  <text x="950" y="140" text-anchor="middle" class="label">AICHI OF05ZAT Flow Sensor</text>
  <text x="890" y="170" class="pin">VCC → 5V</text>
  <text x="890" y="190" class="pin">GND → GND</text>
  <text x="890" y="210" class="pin">SIG → GPIO 27 (interrupt)</text>

  <!-- Pump / Relay -->
  <rect x="820" y="240" width="260" height="120" class="box" rx="6"/>
  <text x="950" y="270" text-anchor="middle" class="label">STARFLO 12V Pump (via relay)</text>
  <text x="890" y="300" class="pin">Relay IN → GPIO 26</text>
  <text x="890" y="320" class="pin">Relay VCC → 5V</text>
  <text x="890" y="340" class="pin">Relay GND → GND</text>
  <text x="890" y="360" class="note">Pump power: 12V (separate supply). Add fuse &amp; flyback diode/MOSFET protection.</text>

  <!-- Ultrasonic -->
  <rect x="820" y="380" width="260" height="120" class="box" rx="6"/>
  <text x="950" y="410" text-anchor="middle" class="label">Ultrasonic Sensor (HC-SR04)</text>
  <text x="890" y="440" class="pin">VCC → 5V</text>
  <text x="890" y="460" class="pin">GND → GND</text>
  <text x="890" y="480" class="pin">TRIG → GPIO 18 (or GPIO 22)</text>
  <text x="890" y="500" class="pin">ECHO → GPIO 19 (or GPIO 21)</text>

  <!-- Wires (representative) with labels -->
  <!-- TFT MOSI -->
  <line x1="350" y1="275" x2="540" y2="280" class="wire spi" stroke="#2471a3" />
  <text x="440" y="265" class="note">MOSI — GPIO23</text>
  <!-- TFT SCK -->
  <line x1="350" y1="245" x2="540" y2="300" class="wire spi" stroke="#2471a3" />
  <text x="480" y="295" class="note">SCK — GPIO18</text>
  <!-- TFT CS -->
  <line x1="350" y1="305" x2="540" y2="220" class="wire spi" stroke="#2471a3" />
  <text x="420" y="238" class="note">CS — GPIO5</text>
  <!-- TFT DC -->
  <line x1="350" y1="275" x2="540" y2="225" class="wire spi" stroke="#2471a3" />
  <text x="460" y="245" class="note">DC — GPIO2</text>
  <!-- TFT RST -->
  <line x1="350" y1="295" x2="540" y2="175" class="wire control" stroke="#8e44ad" />
  <text x="460" y="185" class="note">RST — GPIO4</text>
  <!-- TFT LED -->
  <line x1="350" y1="335" x2="540" y2="340" class="wire vcc" stroke="#c0392b" />
  <text x="480" y="350" class="note">LED / BL (3.3V)</text>
  <!-- Flow signal -->
  <line x1="350" y1="365" x2="890" y2="210" class="wire signal" stroke="#27ae60" />
  <text x="620" y="330" class="note">FLOW SIG — GPIO27</text>
  <!-- Pump control -->
  <line x1="350" y1="395" x2="890" y2="300" class="wire control" stroke="#8e44ad" />
  <text x="640" y="360" class="note">PUMP RELAY IN — GPIO26</text>
  <!-- Ultrasonic TRIG/ECHO (with conflict note) -->
  <line x1="350" y1="185" x2="890" y2="480" class="wire signal" stroke="#27ae60" />
  <text x="620" y="220" class="note">ULTRASONIC TRIG/ECHO (GPIO18/19) — alt: 22/21</text>
  <rect x="330" y="160" width="420" height="80" class="conflict" rx="6"/>
  <text x="540" y="200" text-anchor="middle" class="note">Note: GPIO 18/19 used by TFT SCK/MISO — see options: change ultrasonic or remap TFT SPI</text>

  <!-- Power & GND rails -->
  <line x1="200" y1="470" x2="890" y2="470" stroke="#000" stroke-width="4" />
  <text x="90" y="470" class="pin">GND (common)</text>
  <line x1="200" y1="470" x2="200" y2="250" stroke="#c0392b" stroke-width="4" />
  <text x="210" y="250" class="pin">3.3V (TFT VCC)</text>
  <line x1="800" y1="180" x2="980" y2="180" stroke="#c0392b" stroke-width="4" />
  <text x="980" y="180" class="pin">5V (Flow / Ultrasonic / Relay VCC)</text>

  <!-- Legend with swatches -->
  <rect x="40" y="560" width="360" height="180" fill="#ffffff" stroke="#ddd" />
  <text x="60" y="590" class="label">Legend</text>
  <rect x="60" y="610" width="20" height="12" class="swatch" fill="#2471a3" />
  <text x="88" y="620" class="note">SPI signals (MOSI, SCK, MISO, CS, DC)</text>
  <rect x="60" y="636" width="20" height="12" class="swatch" fill="#27ae60" />
  <text x="88" y="646" class="note">General signals (flow, ultrasonic)</text>
  <rect x="60" y="662" width="20" height="12" class="swatch" fill="#8e44ad" />
  <text x="88" y="672" class="note">Control signals (reset, relay in)</text>
  <rect x="60" y="688" width="20" height="12" class="swatch" fill="#c0392b" />
  <text x="88" y="698" class="note">Power rails (3.3V / 5V / 12V)</text>

  <!-- Title block -->
  <rect x="840" y="560" width="320" height="180" fill="#ffffff" stroke="#333" />
  <text x="860" y="590" class="titleblock">Title: ESP32 Oil Node Wiring</text>
  <text x="860" y="610" class="titleblock">Author: Denuel Inambao</text>
  <text x="860" y="630" class="titleblock">Date: 2025-12-23</text>
  <text x="860" y="650" class="titleblock">Version: 1.0</text>
  <text x="860" y="670" class="titleblock">Notes: Use common GND. Check voltages and fuse 12V pump.</text>

</svg>